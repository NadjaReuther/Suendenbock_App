@using Suendenbock_App.Models.Domain
@model List<MagicClass>
@{
	ViewData["Title"] = "Magieklasse erstellen";
	Layout = "~/Views/Shared/_Layout.cshtml";
}
@section Styles {
	<link href="/css/character.css" rel="stylesheet" />
	<link href="https://fonts.googleapis.com/css2?family=MedievalSharp&family=Uncial+Antiqua&display=swap" rel="stylesheet">
	}

<div class="steckbrief-background">
    <div class="steckbrief-container">
        <div class="steckbrief-title">Charakter</div>
        <form asp-controller="MagicClass" asp-action="CreateEdit">
            <div class="mt-5 mb-3">
                <label for="vorname" class="form-label">Magieklasse</label>
                <input type="text" class="form-control" id="bezeichnung" name="bezeichnung" required>
            </div>

            <!--Todo Lightcards als kleine rectangle in Farbe-->
            <div class="mb-3">
                <select class="form-select" id="magicClassId" name="magicClassId">
                    <option value="" disabled selected hidden>Magieklasse auswählen...</option>
                    
                </select>
            </div>
            <div class="mb-3">
                <label class="form-label">Spezialisierungen</label>
                <div class="specializations-container">
                    <div class="specialization-item mb-2">
                        <div class="row">
                            <div class="col-md-5">
                                <input type="text" class="form-control" name="specializations[0].Name" placeholder="Name der Spezialisierung">
                            </div>
                            <div class="col-md-6">
                                <input type="text" class="form-control" name="specializations[0].Description" placeholder="Beschreibung (optional)">
                            </div>
							<div class="col-md-1">
								<button type="button" class="btn btn-danger btn-sm" onclick="removeSpecialization(this)">-</button>
                        </div>
                    </div>
                </div>
					<button type="button" class="btn btn-primary btn-sm mt-2" onclick="addSpecialization()">+</button>
            </div>
            <div class="text-center">
                <button type="submit" class="btn-wachs">Gebilligt</button>
            </div>
        </form>
    </div>
</div>

@section Scripts {
    <script>
        function addSpecialization() {
            const container = document.querySelector('.specializations-container');
			const count = container.children.length;
			const newItem = container.children[0].cloneNode(true);

            //update Names of input fields
			newItem.querySelector('input[name$=".Name"]').name = `specializations[${count}].Name`;
			newItem.querySelector('input[name$=".Description"]').name = `specializations[${count}].Description`;

			// Clear the input values
			newItem.querySelectorAll('input').forEach(input => input.value = '');

			// Append the new item to the container
			container.appendChild(newItem);
        }

		function removeSpecialization(button) {
			const container = document.querySelector('.specializations-container');
			if (container.children.length > 1) {
				container.removeChild(button.closest('.specialization-item'));
			}
		}
</script>
}