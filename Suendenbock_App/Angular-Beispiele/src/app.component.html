<div class="bg-background-light text-text-main font-body min-h-screen relative overflow-hidden transition-colors duration-300 flex items-center justify-center p-4">
  <div class="absolute inset-0 pointer-events-none opacity-[0.05]" style="background-image: url('https://www.transparenttextures.com/patterns/aged-paper.png');"></div>

  @switch (viewState()) {
    @case ('initialModal') {
      <div class="relative w-full max-w-lg bg-panel-light border-2 border-primary rounded-xl shadow-2xl overflow-hidden transform transition-all animate-fade-in">
        <div class="absolute top-0 left-0 w-8 h-8 border-t-4 border-l-4 border-primary rounded-tl-lg pointer-events-none"></div>
        <div class="absolute top-0 right-0 w-8 h-8 border-t-4 border-r-4 border-primary rounded-tr-lg pointer-events-none"></div>
        <div class="absolute bottom-0 left-0 w-8 h-8 border-b-4 border-l-4 border-primary rounded-bl-lg pointer-events-none"></div>
        <div class="absolute bottom-0 right-0 w-8 h-8 border-b-4 border-r-4 border-primary rounded-br-lg pointer-events-none"></div>
        <div class="bg-gradient-to-b from-primary/20 to-transparent p-6 text-center border-b border-primary/20">
          <h2 class="text-3xl font-display text-text-main tracking-wide drop-shadow-sm">
            Spielsession starten
          </h2>
          <div class="flex justify-center mt-2">
            <div class="h-1 w-24 bg-gradient-to-r from-transparent via-primary to-transparent"></div>
          </div>
        </div>
        <div class="p-8 flex flex-col gap-5 items-center">
          <p class="text-center text-sm mb-4 font-cinzel text-text-main/80">
            Wähle, wie du dein Abenteuer beginnen möchtest.
          </p>
          <button (click)="neuenAktAnlegen()" class="group relative w-full py-4 px-6 bg-[#E8DCC0] hover:bg-primary hover:text-white border border-primary/50 transition-all duration-300 rounded shadow-sm flex items-center justify-center gap-3 overflow-hidden">
            <span class="absolute inset-0 w-full h-full bg-gradient-to-r from-white/0 via-white/20 to-white/0 -translate-x-full group-hover:animate-shimmer"></span>
            <span class="material-icons text-2xl group-hover:scale-110 transition-transform">add_circle_outline</span>
            <span class="font-cinzel font-bold tracking-wide text-lg">Neuen Akt anlegen</span>
          </button>
          <button (click)="vorhandenenAktLaden()" class="group w-full py-4 px-6 bg-[#E8DCC0] hover:bg-primary hover:text-white border border-primary/50 transition-all duration-300 rounded shadow-sm flex items-center justify-center gap-3">
            <span class="material-icons text-2xl group-hover:scale-110 transition-transform">folder_open</span>
            <span class="font-cinzel font-bold tracking-wide text-lg">Vorhandenen Akt laden</span>
          </button>
          <button (click)="verwaltenAkten()" class="group w-full py-4 px-6 bg-[#E8DCC0] hover:bg-primary hover:text-white border border-primary/50 transition-all duration-300 rounded shadow-sm flex items-center justify-center gap-3">
            <span class="material-icons text-2xl group-hover:scale-110 transition-transform">settings</span>
            <span class="font-cinzel font-bold tracking-wide text-lg">Akte verwalten</span>
          </button>
        </div>
      </div>
    }
    @case ('newActForm') {
      <div class="relative w-full max-w-3xl bg-panel-light border-2 border-primary rounded-xl shadow-2xl overflow-hidden transform transition-all animate-fade-in">
        <div class="absolute top-0 left-0 w-8 h-8 border-t-4 border-l-4 border-primary rounded-tl-lg pointer-events-none"></div>
        <div class="absolute top-0 right-0 w-8 h-8 border-t-4 border-r-4 border-primary rounded-tr-lg pointer-events-none"></div>
        <div class="absolute bottom-0 left-0 w-8 h-8 border-b-4 border-l-4 border-primary rounded-bl-lg pointer-events-none"></div>
        <div class="absolute bottom-0 right-0 w-8 h-8 border-b-4 border-r-4 border-primary rounded-br-lg pointer-events-none"></div>
        <div class="bg-gradient-to-b from-primary/20 to-transparent p-6 text-center border-b border-primary/20">
          <h2 class="text-3xl font-display text-text-main tracking-wide drop-shadow-sm">
            {{ actToProcess() ? 'Akt bearbeiten' : 'Neuen Akt anlegen' }}
          </h2>
        </div>
        <div class="p-8 max-h-[80vh] overflow-y-auto">
          <form class="space-y-6" onsubmit="return false">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
              <!-- Left Column -->
              <div class="space-y-6">
                <div>
                  <label for="act-number" class="block text-sm font-cinzel tracking-wider text-text-main/80 mb-2">Nummer des Aktes</label>
                  <input type="number" id="act-number" min="1" [value]="actNumber() ?? ''" (input)="onActNumberChange($event)" class="w-full bg-[#E8DCC0] border border-primary/50 rounded px-3 py-2 text-text-main placeholder-text-main/50 focus:ring-primary focus:border-primary focus:outline-none transition-shadow shadow-inner" placeholder="z.B. 2">
                </div>
                <div>
                  <label class="block text-sm font-cinzel tracking-wider text-text-main/80 mb-2">Karte hochladen</label>
                  <div class="w-full h-48 bg-[#E8DCC0] border-2 border-dashed border-primary/50 rounded flex items-center justify-center relative overflow-hidden">
                    @if (mapPreviewUrl()) {
                      <img [src]="mapPreviewUrl()" alt="Karten-Vorschau" class="w-full h-full object-cover">
                    } @else {
                      <div class="text-center text-text-main/60">
                        <span class="material-icons text-4xl">add_photo_alternate</span>
                        <p class="text-xs font-cinzel mt-1">Bild hierher ziehen oder klicken</p>
                      </div>
                    }
                    <input type="file" (change)="onFileSelected($event)" accept="image/*" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer">
                  </div>
                </div>
                 <div>
                  <label for="country" class="block text-sm font-cinzel tracking-wider text-text-main/80 mb-2">Land</label>
                  <select id="country" [value]="selectedCountry()" (change)="onCountryChange($event)" class="w-full bg-[#E8DCC0] border border-primary/50 rounded px-3 py-2 text-text-main focus:ring-primary focus:border-primary focus:outline-none transition-shadow shadow-inner appearance-none" style="background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%234A3B2A%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E'); background-repeat: no-repeat; background-position: right 0.7rem center; background-size: 0.65em auto;">
                    <option>Böhmen</option>
                    <option>Bayern</option>
                    <option>Sachsen</option>
                    <option>Brandenburg</option>
                  </select>
                </div>
              </div>

              <!-- Right Column -->
              <div class="space-y-6">
                 <div>
                  <label class="block text-sm font-cinzel tracking-wider text-text-main/80 mb-2">Begleiter</label>
                  <div class="space-y-4">
                     <select id="companion1" [value]="selectedCompanion1() ?? 'null'" (change)="onCompanion1Change($event)" class="w-full bg-[#E8DCC0] border border-primary/50 rounded px-3 py-2 text-text-main focus:ring-primary focus:border-primary focus:outline-none transition-shadow shadow-inner appearance-none" style="background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%234A3B2A%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E'); background-repeat: no-repeat; background-position: right 0.7rem center; background-size: 0.65em auto;">
                          <option value="null">-- Erster Begleiter --</option>
                          @for (c of companionOptions; track c) {
                              <option [value]="c">{{ c }}</option>
                          }
                      </select>
                      <select id="companion2" [value]="selectedCompanion2() ?? 'null'" (change)="onCompanion2Change($event)" [disabled]="!selectedCompanion1()" class="w-full bg-[#E8DCC0] border border-primary/50 rounded px-3 py-2 text-text-main focus:ring-primary focus:border-primary focus:outline-none transition-shadow shadow-inner appearance-none disabled:bg-gray-200/50 disabled:cursor-not-allowed" style="background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%234A3B2A%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E'); background-repeat: no-repeat; background-position: right 0.7rem center; background-size: 0.65em auto;">
                          <option value="null">-- Zweiter Begleiter (optional) --</option>
                          @for (c of companion2Options(); track c) {
                              <option [value]="c">{{ c }}</option>
                          }
                      </select>
                  </div>
                </div>
                <div>
                   <label for="month" class="block text-sm font-cinzel tracking-wider text-text-main/80 mb-2">Monat</label>
                   <select id="month" [value]="selectedMonth() ?? ''" (change)="onMonthChange($event)" [disabled]="actToProcess() !== null" class="w-full bg-[#E8DCC0] border border-primary/50 rounded px-3 py-2 text-text-main focus:ring-primary focus:border-primary focus:outline-none transition-shadow shadow-inner appearance-none disabled:bg-gray-200/50 disabled:cursor-not-allowed" style="background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%234A3B2A%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E'); background-repeat: no-repeat; background-position: right 0.7rem center; background-size: 0.65em auto;">
                      <option disabled value=""> -- Wähle einen Monat -- </option>
                      <option value="Januar">Januar</option> <option value="Februar">Februar</option> <option value="März">März</option> <option value="April">April</option> <option value="Mai">Mai</option> <option value="Juni">Juni</option> <option value="Juli">Juli</option> <option value="August">August</option> <option value="September">September</option> <option value="Oktober">Oktober</option> <option value="November">November</option> <option value="Dezember">Dezember</option>
                   </select>
                </div>
                
                @if(selectedMonth()) {
                  <div class="space-y-2 animate-fade-in">
                    <label class="block text-sm font-cinzel tracking-wider text-text-main/80">Wetterverlauf für {{selectedMonth()}}</label>
                    @for(weather of weatherOptions(); track weather; let i = $index) {
                      <div>
                        <input type="radio" name="weather" [value]="weather" class="hidden" id="weather-{{i}}" (change)="onWeatherChange($event)" [checked]="selectedWeather() === weather">
                        <label for="weather-{{i}}" class="flex items-center p-2 bg-[#E8DCC0]/70 border border-primary/30 rounded cursor-pointer hover:bg-primary/10 transition-colors">
                          <div class="w-4 h-4 border-2 border-text-main/50 rounded-full flex items-center justify-center mr-3">
                             <div class="w-2 h-2 bg-primary rounded-full opacity-0 transition-opacity"></div>
                          </div>
                          <span class="font-body text-sm">{{weather}}</span>
                        </label>
                      </div>
                    }
                  </div>
                }
                @if(selectedWeatherForecast(); as forecast) {
                  <div class="mt-4 p-3 bg-[#E8DCC0]/70 border border-primary/30 rounded animate-fade-in">
                    <label class="block text-xs font-cinzel tracking-wider text-text-main/70 mb-2 text-center">VORSCHAU FÜR 5 TAGE</label>
                    <div class="flex justify-around text-center text-text-main">
                      @for(day of forecast; track day.day) {
                        <div class="flex flex-col items-center w-1/5">
                          <span class="font-cinzel text-xs">{{ day.day }}</span>
                          <span class="material-icons text-2xl my-1 text-primary">{{ day.icon }}</span>
                          <span class="font-body text-[10px] font-bold">{{ day.temp }}</span>
                        </div>
                      }
                    </div>
                  </div>
                }
              </div>
            </div>
            <div class="flex items-center justify-between pt-6 border-t border-primary/20">
              <button type="button" (click)="backToInitialModal()" class="text-text-main/70 hover:text-primary font-cinzel text-sm tracking-widest uppercase transition-colors flex items-center gap-2 py-2">
                <span class="material-icons text-base">arrow_back</span>
                Zurück
              </button>
              <button type="button" (click)="saveAkt()" [disabled]="!isFormFullyValid()" class="group relative py-3 px-8 bg-primary text-white border border-amber-600 transition-all duration-300 rounded shadow-md flex items-center justify-center gap-3 overflow-hidden disabled:bg-gray-400/70 disabled:border-gray-500 disabled:text-white/70 disabled:cursor-not-allowed">
                <span class="material-icons text-xl">gavel</span>
                <span class="font-cinzel font-bold tracking-wide">{{ actToProcess() ? 'Änderungen speichern' : 'Akt erstellen' }}</span>
              </button>
            </div>
          </form>
        </div>
      </div>
    }
    @case ('loadActView') {
      <div class="relative w-full max-w-2xl bg-panel-light border-2 border-primary rounded-xl shadow-2xl overflow-hidden transform transition-all animate-fade-in">
        <div class="bg-gradient-to-b from-primary/20 to-transparent p-6 text-center border-b border-primary/20">
          <h2 class="text-3xl font-display text-text-main tracking-wide drop-shadow-sm">
            Vorhandenen Akt laden
          </h2>
        </div>
        <div class="p-8 max-h-[80vh] overflow-y-auto">
          @if (savedAkten().length === 0) {
            <div class="text-center text-text-main/70 font-cinzel">
              <span class="material-icons text-5xl opacity-50">upcoming</span>
              <p class="mt-4">Es wurden noch keine Akten gespeichert.</p>
            </div>
          } @else {
            <div class="space-y-4">
              @for(akt of savedAkten(); track akt.id) {
                <div class="bg-[#E8DCC0] border border-primary/50 rounded-lg p-4 flex items-center justify-between hover:shadow-lg transition-shadow">
                  <div class="flex items-center gap-4">
                    <img [src]="akt.mapImageUrl" alt="Karten-Miniatur" class="w-16 h-16 object-cover rounded border-2 border-primary/30">
                    <div>
                      <h3 class="font-display text-xl text-text-main">Akt {{akt.actNumber}}</h3>
                      <p class="text-sm font-cinzel text-text-main/80">{{akt.country}} - {{akt.month}}</p>
                      <p class="text-xs text-text-main/60 mt-1">
                        Begleiter: {{akt.companion1}} @if(akt.companion2) { & {{akt.companion2}} }
                      </p>
                    </div>
                  </div>
                  <button (click)="startReselectWeather(akt)" class="py-2 px-4 bg-primary hover:bg-opacity-90 text-white border border-amber-600 transition-all duration-300 rounded shadow-sm flex items-center gap-2">
                     <span class="material-icons text-lg">play_arrow</span>
                     <span class="font-cinzel tracking-wide text-sm">Laden</span>
                  </button>
                </div>
              }
            </div>
          }
        </div>
        <div class="p-4 bg-panel-light border-t border-primary/20 flex justify-start">
            <button (click)="backToInitialModal()" class="text-text-main/70 hover:text-primary font-cinzel text-sm tracking-widest uppercase transition-colors flex items-center gap-2 py-2">
                <span class="material-icons text-base">arrow_back</span>
                Zurück zur Auswahl
            </button>
        </div>
      </div>
    }
     @case ('manageActsView') {
      <div class="relative w-full max-w-2xl bg-panel-light border-2 border-primary rounded-xl shadow-2xl overflow-hidden transform transition-all animate-fade-in">
        <div class="bg-gradient-to-b from-primary/20 to-transparent p-6 text-center border-b border-primary/20">
          <h2 class="text-3xl font-display text-text-main tracking-wide drop-shadow-sm">
            Akte verwalten
          </h2>
        </div>
        <div class="p-8 max-h-[80vh] overflow-y-auto">
          @if (savedAkten().length === 0) {
            <div class="text-center text-text-main/70 font-cinzel">
              <span class="material-icons text-5xl opacity-50">upcoming</span>
              <p class="mt-4">Es wurden noch keine Akten gespeichert.</p>
            </div>
          } @else {
            <div class="space-y-4">
              @for(akt of savedAkten(); track akt.id) {
                <div class="bg-[#E8DCC0] border border-primary/50 rounded-lg p-4 flex items-center justify-between hover:shadow-lg transition-shadow">
                  <div class="flex items-center gap-4 flex-grow">
                    <img [src]="akt.mapImageUrl" alt="Karten-Miniatur" class="w-16 h-16 object-cover rounded border-2 border-primary/30">
                    <div>
                      <h3 class="font-display text-xl text-text-main">Akt {{akt.actNumber}}</h3>
                      <p class="text-sm font-cinzel text-text-main/80">{{akt.country}} - {{akt.month}}</p>
                    </div>
                  </div>
                  <div class="flex gap-2">
                    <button (click)="startEditAkt(akt)" class="py-2 px-3 bg-primary hover:bg-opacity-90 text-white transition-all duration-300 rounded shadow-sm flex items-center gap-2">
                       <span class="material-icons text-lg">edit</span>
                    </button>
                     <button (click)="deleteAkt(akt.id)" class="py-2 px-3 bg-combat hover:bg-opacity-90 text-white transition-all duration-300 rounded shadow-sm flex items-center gap-2">
                       <span class="material-icons text-lg">delete</span>
                    </button>
                  </div>
                </div>
              }
            </div>
          }
        </div>
        <div class="p-4 bg-panel-light border-t border-primary/20 flex justify-start">
            <button (click)="backToInitialModal()" class="text-text-main/70 hover:text-primary font-cinzel text-sm tracking-widest uppercase transition-colors flex items-center gap-2 py-2">
                <span class="material-icons text-base">arrow_back</span>
                Zurück zur Auswahl
            </button>
        </div>
      </div>
    }
     @case ('reselectWeatherView') {
        <div class="relative w-full max-w-lg bg-panel-light border-2 border-primary rounded-xl shadow-2xl overflow-hidden transform transition-all animate-fade-in">
            <div class="bg-gradient-to-b from-primary/20 to-transparent p-6 text-center border-b border-primary/20">
                <h2 class="text-3xl font-display text-text-main tracking-wide drop-shadow-sm">Wetter für den Tag wählen</h2>
            </div>
            @if(actToProcess(); as akt) {
                <div class="p-8">
                    <div class="text-center mb-6 p-4 bg-[#E8DCC0]/70 rounded-lg border border-primary/30">
                        <h3 class="font-display text-xl text-text-main">Akt {{akt.actNumber}}: {{akt.country}}</h3>
                        <p class="font-cinzel text-text-main/80">Monat: {{akt.month}} (festgelegt)</p>
                    </div>
                    <div class="space-y-2">
                        @for(weather of weatherOptions(); track weather; let i = $index) {
                        <div>
                            <input type="radio" name="weather" [value]="weather" class="hidden" id="weather-{{i}}" (change)="onWeatherChange($event)" [checked]="selectedWeather() === weather">
                            <label for="weather-{{i}}" class="flex items-center p-3 bg-[#E8DCC0]/70 border border-primary/30 rounded cursor-pointer hover:bg-primary/10 transition-colors">
                            <div class="w-4 h-4 border-2 border-text-main/50 rounded-full flex items-center justify-center mr-3">
                                <div class="w-2 h-2 bg-primary rounded-full opacity-0 transition-opacity"></div>
                            </div>
                            <span class="font-body text-sm">{{weather}}</span>
                            </label>
                        </div>
                        }
                    </div>
                </div>
                <div class="flex items-center justify-between p-4 bg-panel-light border-t border-primary/20">
                    <button (click)="backToLoadViewFromWeather()" class="text-text-main/70 hover:text-primary font-cinzel text-sm tracking-widest uppercase transition-colors flex items-center gap-2 py-2">
                        <span class="material-icons text-base">arrow_back</span>
                        Zurück
                    </button>
                    <button (click)="startGame()" [disabled]="!selectedWeather()" class="py-2 px-6 bg-primary hover:bg-opacity-90 text-white border border-amber-600 transition-all duration-300 rounded shadow-sm flex items-center gap-2 disabled:bg-gray-400/70 disabled:border-gray-500 disabled:text-white/70 disabled:cursor-not-allowed">
                        <span class="material-icons text-lg">play_arrow</span>
                        <span class="font-cinzel tracking-wide text-sm">Spiel starten</span>
                    </button>
                </div>
            }
        </div>
     }
    @case('gameView') {
      <div class="w-full max-w-5xl mx-auto p-4 md:p-8 animate-fade-in">
        <div class="text-center mb-8">
          <h1 class="text-6xl md:text-7xl font-display font-bold text-text-main tracking-wider">SPIELMODUS</h1>
          <p class="font-cinzel text-text-main/80 mt-2">"Willkommen in der Welt von 1618."</p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 md:gap-8 mb-8 md:mb-12">
          <!-- Karte -->
          <button class="game-card border border-black/5">
            <span class="corner-decoration"></span>
            <span class="material-icons text-4xl text-accent mb-4">map</span>
            <h3 class="text-2xl font-cinzel text-accent tracking-widest">KARTE</h3>
            <p class="text-xs text-accent/70 font-cinzel tracking-widest mt-1">ERKUNDE DAS REICH</p>
          </button>
          <!-- Quests -->
          <button class="game-card border border-black/5">
            <span class="corner-decoration"></span>
            <span class="material-icons text-4xl text-accent mb-4">history_edu</span>
            <h3 class="text-2xl font-cinzel text-accent tracking-widest">QUESTS</h3>
            <p class="text-xs text-accent/70 font-cinzel tracking-widest mt-1">DEINE AUFGABEN</p>
          </button>
          <!-- Trophäen -->
          <button class="game-card border border-black/5">
            <span class="corner-decoration"></span>
            <span class="material-symbols-outlined text-4xl text-accent mb-4">skull</span>
            <h3 class="text-2xl font-cinzel text-accent tracking-widest">TROPHÄEN</h3>
            <p class="text-xs text-accent/70 font-cinzel tracking-widest mt-1">DEINE ERFOLGE</p>
          </button>
        </div>

        <div class="flex justify-center mb-10">
          <button class="bg-combat text-white font-cinzel font-bold tracking-widest text-xl py-4 px-12 rounded-lg shadow-lg hover:bg-combat/90 transition-colors flex items-center gap-3 border-b-4 border-red-900/60 hover:border-b-2">
             <span class="material-symbols-outlined text-3xl">swords</span>
             BEREIT ZUM KAMPF
          </button>
        </div>

        <div class="flex justify-center items-center gap-4 mb-6">
          <button class="bg-gold-action text-text-main font-cinzel font-bold tracking-wider py-2 px-5 rounded shadow-md hover:bg-gold-action/90 transition-colors flex items-center gap-2 border-b-2 border-amber-800/60">
            <span class="material-icons text-lg">restaurant</span>
            KURZE RAST
          </button>
          <button class="bg-gold-action text-text-main font-cinzel font-bold tracking-wider py-2 px-5 rounded shadow-md hover:bg-gold-action/90 transition-colors flex items-center gap-2 border-b-2 border-amber-800/60">
            <span class="material-icons text-lg">night_shelter</span>
            NACHTLAGER
          </button>
        </div>

        <div class="w-full max-w-4xl mx-auto bg-panel-light p-6 rounded-lg border border-primary/30 shadow-md mb-8">
            @if(activeWeatherForecast(); as forecast) {
                <div class="flex justify-between items-center">
                    <div class="w-1/3 text-center border-r border-primary/20 pr-6">
                        <p class="font-cinzel text-lg tracking-wider text-text-main/80">Heute</p>
                        <div class="flex items-center justify-center gap-2 mt-2">
                            <span class="material-icons text-6xl text-primary">{{ forecast[0].icon }}</span>
                            <div>
                                <p class="font-display text-4xl text-text-main">{{ forecast[0].temp.split('/')[0] }}</p>
                                <p class="font-body text-sm text-text-main/70">{{ forecast[0].temp.split('/')[1] }}</p>
                            </div>
                        </div>
                        @if (activeAkt(); as akt) {
                            <p class="text-xs font-cinzel text-text-main/60 mt-2 leading-tight">{{ akt.weather }}</p>
                        }
                    </div>
                    <div class="w-2/3 flex justify-around pl-6">
                        @for(day of forecast; track day.day; let i = $index) {
                            @if (i > 0) {
                                <div class="flex flex-col items-center text-text-main">
                                    <span class="font-cinzel text-md">{{ day.day }}</span>
                                    <span class="material-icons text-4xl my-2 text-primary">{{ day.icon }}</span>
                                    <span class="font-body text-sm font-semibold">{{ day.temp }}</span>
                                </div>
                            }
                        }
                    </div>
                </div>
            } @else {
                <p class="text-center font-cinzel text-text-main/70">Wetterdaten nicht verfügbar.</p>
            }
        </div>
        
        <div class="text-center">
           <button (click)="goBackToLoadView()" class="text-text-main/70 hover:text-primary font-cinzel text-sm tracking-widest uppercase transition-colors flex items-center gap-2 py-2 mx-auto">
                <span class="material-icons text-base">arrow_back</span>
                Zurück zur Akt-Auswahl
            </button>
        </div>

      </div>
    }
  }
</div>
<style>
  input[type="radio"]:checked + label div div {
    opacity: 1;
  }
  input[type="radio"]:checked + label {
    border-color: #C5A059;
    background-color: rgba(197, 160, 89, 0.2);
  }
  .game-card {
    @apply bg-panel-light p-6 text-center flex flex-col items-center justify-center aspect-[4/3] md:aspect-square rounded-md cursor-pointer transition-shadow duration-300 relative shadow-[0_1px_3px_rgba(0,0,0,0.04)] hover:shadow-md;
  }
  .corner-decoration {
    @apply absolute inset-0 pointer-events-none;
  }
  .game-card::before, .game-card::after, .corner-decoration::before, .corner-decoration::after {
    content: '';
    position: absolute;
    width: 16px;
    height: 16px;
    border-color: #8B4513; /* Accent color to match text */
    border-style: solid;
  }
  .game-card::before { top: 12px; left: 12px; border-width: 1px 0 0 1px; }
  .game-card::after { top: 12px; right: 12px; border-width: 1px 1px 0 0; }
  .corner-decoration::before { bottom: 12px; left: 12px; border-width: 0 0 1px 1px; }
  .corner-decoration::after { bottom: 12px; right: 12px; border-width: 0 1px 1px 0; }
</style>